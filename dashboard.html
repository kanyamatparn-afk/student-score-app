<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-light">

<nav class="navbar navbar-dark bg-primary px-3">
<span class="navbar-brand">üìò ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</span>
<a href="/logout" class="btn btn-light">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
</nav>

<div class="container mt-4">

<div class="row text-center">
<div class="col-md-4">
<div class="card p-3 shadow">
<h5>üë©‚Äçüéì ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h5>
<h2>{{ data|length }}</h2>
</div>
</div>

<div class="col-md-4">
<div class="card p-3 shadow">
<h5>üìä ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</h5>
<h2>{{ avg|round(2) }}</h2>
</div>
</div>

<div class="col-md-4">
<div class="card p-3 shadow">
<h5>üéØ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</h5>
<h2>‡∏õ‡∏Å‡∏ï‡∏¥</h2>
</div>
</div>
</div>

{% if role=="teacher" %}
<a href="/add" class="btn btn-success mt-3">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</a>
{% endif %}

<table class="table table-bordered table-striped mt-3 text-center">
<tr class="table-primary">
<th>ID</th><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏ß‡∏¥‡∏ä‡∏≤</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th><th>‡πÄ‡∏Å‡∏£‡∏î</th>
{% if role=="teacher" %}<th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>{% endif %}
</tr>

{% for d in data %}
<tr>
<td>{{d[0]}}</td>
<td>{{d[1]}}</td>
<td>{{d[2]}}</td>
<td>{{d[3]}}</td>
<td>
{% if d[3]>=80 %}A
{% elif d[3]>=70 %}B
{% elif d[3]>=60 %}C
{% elif d[3]>=50 %}D
{% else %}F{% endif %}
</td>

{% if role=="teacher" %}
<td>
<a href="/edit/{{d[0]}}" class="btn btn-warning btn-sm">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</a>
<a href="/delete/{{d[0]}}" class="btn btn-danger btn-sm">‡∏•‡∏ö</a>
</td>
{% endif %}
</tr>
{% endfor %}
</table>

<h4 class="mt-4">üìà ‡∏Å‡∏£‡∏≤‡∏ü‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h4>
<canvas id="myChart"></canvas>

<script>
var labels = {{ labels | tojson }};
var scores = {{ scores | tojson }};

new Chart(document.getElementById("myChart"),{
type:"bar",
data:{labels:labels,datasets:[{label:"‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô",data:scores}]}
});
</script>

</div>
</body>
</html>